<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks43team02.mapper.DocumentSettingMapper">
	<resultMap type="DocumentCateS"					id="DocumentCateSResultMap">
  		<id column="document_cate_S_code"						property="documentCateSCode"/>
  		<result column="cp_representative_code" 				property="cpRepresentativeCode"/>
  		<result column="super_admin_id" 						property="superAdminId"/>
		<result column="document_cate_L_code"					property="documentCateLCode"/>
  		<result column="cate_name_L"							property="cateNameL"/>
  		<result column="cate_name_S" 							property="cateNameS"/>
  		<result column="reg_date" 								property="regDate"/>
	</resultMap>
	
	<select id="getDocSetList" parameterType="DocumentCateS" resultMap="DocumentCateSResultMap">
	/* 등록된 문서 양식 리스트 */
	SELECT 
		  dc.document_cate_S_code
		, dc.cp_representative_code
		, dc.super_admin_id
		, dc.document_cate_L_code
		, dc.cate_name_L
		, dc.cate_name_S
		, dc.reg_date
	FROM 
		tb_document_cate_S AS dc
	</select>
	
	
	<insert id="addDocumentCate" parameterType="DocumentCateS">
	/* 문서 양식 등록 */
	INSERT INTO tb_document_cate_S(
		  document_cate_S_code
		, cp_representative_code
		, super_admin_id
		, document_cate_L_code
		, cate_name_L
		, cate_name_S
		, reg_date
	)VALUES(
		(SELECT CONCAT('document_cate_S_code_',(SELECT(Max(cast(SUBSTRING_INDEX(document_cate_S_code_,'_',-1) AS UNSIGNED)) +1)
			from
				tb_document_cate_S
				)))
			, 'cp_representative_code_01'
			, 'ksmart43id@ksmart.or.kr'
			, #{documentCateLCode}
			, #{cateNameL}
			, #{cateNameS}
			, NOW()
	)
	</insert>
</mapper>