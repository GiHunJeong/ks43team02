<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ks43team02.mapper.EmplyMapper">

	<resultMap type="Emply" id="emplyResultMap">
		<id 	column="emply_id" 				property="emplyId"/>
		<result column="emply_pw" 				property="emplyPw"/>
		<result column="emply_number" 			property="emplyNumber"/>
		<result column="emply_organization" 	property="emplyOrganization"/>
		<result column="emply_rank" 			property="emplyRank"/>
		<result column="emply_name" 			property="emplyName"/>
		<result column="emply_birth" 			property="emplyBirth"/>
		<result column="salary" 				property="salary"/>
		<result column="emply_account" 			property="emplyAccount"/>
		<result column="e_home_address" 		property="emplyAddr"/>
		<result column="employment_date" 		property="emplymentDate"/>
		<result column="employment_type" 		property="emplymentType"/>
		<result column="retire_status"			property="retireStatus"/>
	</resultMap>
	
	<select id="getEmplyList" fetchSize="100" resultMap="emplyResultMap">
		/* 사원리스트 출력 쿼리문 */
		SELECT
			e.emply_id,
			e.emply_pw,
			e.emply_number,
			e.emply_organization,
			e.emply_rank,
			e.emply_name,
			e.emply_birth,
			e.salary,
			e.emply_account,
			e.e_home_address,
			e.employment_date,
			e.employment_type,
			e.retire_status
		FROM
			tb_emply_info_reg AS e;
	</select>
	
	<select id="getSearchEmplyList" fetchSize="1000" parameterType="String" resultMap="emplyResultMap">
		/* 사원 검색 */
		SELECT
			e.emply_id,
			e.emply_name,
			e.emply_number,
			e.emply_organization,
			e.emply_rank
		FROM
			tb_emply_info_reg AS e
		<trim prefix="WHERE" prefixOverrides="AND /OR ">
			<if test="searchValue != null and searchValue != ''">
				${searchKey} LIKE CONCAT('%',#{searchValue}, '%');
			</if>
		</trim>
	</select>
	
</mapper>	